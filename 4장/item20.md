# Item 20 : μ¶”μƒ ν΄λμ¤λ³΄λ‹¤λ” μΈν„°νμ΄μ¤λ¥Ό μ°μ„ ν•λΌ


#### 1. Interfaceμ™€ μ¶”μƒν΄λμ¤

##### κ³µν†µμ 
: λ‘ λ§¤μ»¤λ‹μ¦ λ¨λ‘ μΈμ¤ν„΄μ¤ λ©”μ„λ“λ¥Ό κµ¬ν„ ν•νƒλ΅ μ κ³µ κ°€λ¥

##### μ°¨μ΄μ 


|μΈν„°νμ΄μ¤|μ¶”μƒν΄λμ¤|
|----|----|
|μΈν„°νμ΄μ¤κ°€ *μ„ μ–Έν• λ©”μ„λ“λ¥Ό λ¨λ‘ μ •μ*ν•κ³ , ν•΄λ‹Ή κ·μ•½μ„ μ μ§€ν‚¨ ν΄λμ¤λΌλ©΄ λ‹¤λ¥Έ μ–΄λ–¤ ν΄λμ¤λ¥Ό μƒμ†ν–λ“  **κ°™μ€ νƒ€μ…**|μ¶”μƒν΄λμ¤κ°€ μ •μν• νƒ€μ…μ„ *κµ¬ν„ν•λ” ν΄λμ¤*λ” λ°λ“μ‹ **μ¶”μƒν΄λμ¤μ ν•μ„ν΄λμ¤** *(μλ°”λ” λ‹¨μΌ μƒμ†λ§ μ§€μ›ν•΄μ„ μ΄ λ°©μ‹μ€ μƒλ΅μ΄ νƒ€μ…μ„ μ •μν•λ” λ° μ μ•½)*|
|κΈ°μ΅΄ ν΄λμ¤μ—λ„ **μ†μ‰½κ²** μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄ λ„£μ„ μ μμ|κΈ°μ΅΄ ν΄λμ¤ μ„μ— μƒ μ¶”μƒ ν΄λμ¤λ¥Ό λΌμ›λ„£κΈ°λ” **μ–΄λ ¤μ›€**|
|λ―Ήμ¤μΈμ— μ•μ„±λ§μ¶¤ : μ μ—°μ„± |κΈ°μ΅΄ ν΄λμ¤μ— λ§μ”μΈ μ μ—†κ³ , **λ‘ λ¶€λ¨λ¥Ό μ„¬κΈΈ μ μ—†κΈ°μ— λ―Ήμ¤μΈ μ •μ λ¶κ°€** β†’ κ³ λ„λΉ„λ§ κ³„μΈµκµ¬μ΅°κ°€ λ§λ“¤μ–΄μ§„ κ²ƒ **[μ΅°ν•©ν­λ°]**|
|**κ³„μΈµκµ¬μ΅°κ°€ μ—†λ”** νƒ€μ… ν”„λ μ„μ›ν¬λ¥Ό λ§λ“¤ μ μλ‹¤ (ex. SingerSongWriter|μ¶”μƒν΄λμ¤μ—μ„ λ‘ ν΄λμ¤κ°€ κ°™μ€ μ¶”μƒ ν΄λμ¤(=κ³µν†µμ΅°μƒ)λ¥Ό ν™•μ¥ β†’ μƒλ΅ **μ¶”κ°€λ μ¶”μƒ ν΄λμ¤μ λ¨λ“  μμ†μ΄ μ΄λ¥Ό μƒμ†**|

#### 2. λ―Ήμ¤μΈ(mixin) κ³Ό λ””ν΄νΈ λ©”μ„λ“

[1] λ―Ήμ¤μΈ(mixin)
- ν΄λμ¤κ°€ κµ¬ν„ν•  μ μλ” νƒ€μ…μ μ£ΌλκΈ°λ¥μ— μ„ νƒμ  κΈ°λ¥μ„ νΌν•©(mixed in)ν•λ‹¤
- λ―Ήμ¤μΈ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤μ— μ›λμ **μ£Όλνƒ€μ…**μ™Έμ—λ„ **νΉμ • μ„ νƒμ  ν–‰μ„**λ¥Ό μ κ³µν•λ‹¤κ³  μ„ μ–Έν•λ” ν¨κ³Ό
- ex) Comparable : μμ‹ μ„ κµ¬ν„ν• ν΄λμ¤μ μΈμ¤ν„΄μ¤λ“¤λΌλ¦¬λ” μμ„λ¥Ό μ •ν•  μ μλ‹¤κ³  μ„ μ–Έ

[2] λ””ν΄νΈ λ©”μ„λ“
- μΈν„°νμ΄μ¤ λ©”μ„λ“ μ¤‘ κµ¬ν„λ°©λ²•μ΄ λ…λ°±ν• κ²ƒμ„ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µ
- μ κ³µμ‹, @implSpec μλ°”λ… νƒκ·Έλ¥Ό λ¶™μ—¬ λ¬Έμ„ν™” ν•΄μ•Όν•¨
> π’΅ λ””ν΄νΈ λ©”μ„λ“μ μ μ•½μ‚¬ν•­
> λ§μ€ μΈν„°νμ΄μ¤κ°€ equalsμ™€ hashCodeλ“±μ Objectμ λ©”μ„λ“λ¥Ό μ •μ ν•κ³  μμ§€λ§, μ΄λ¥Ό λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•΄μ„  μ•λ¨
> μΈν„°νμ΄μ¤λ” μΈμ¤ν„΄νΈ ν•„λ“/publicμ΄ μ•„λ‹ μ •μ  λ©¤λ²„λ„ κ°€μ§ μ μ—λ‹¤
> λ§λ“¤μ§€ μ•μ€ μΈν„°νμ΄μ¤μ—λ” λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¶”κ°€ λ¶κ°€


#### 3. μ¶”μƒ κ³¨κ²© κµ¬ν„ (skeletal implementation)

: μΈν„°νμ΄μ¤μ™€ μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό ν•¨κ» μ κ³µν•λ©΄ λ‘ λ¶„μ•Όμ μ¥μ μ„ λ¨λ‘ μ·¨ν•λ‹¤

[1] μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ€
- μΈν„°νμ΄μ¤λ΅ :νƒ€μ… μ •μ + ν•„μ”μ‹ λ””ν΄νΈ λ©”μ„λ“ λ‡κ°λ„ ν•¨κ» μ κ³µ
- μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤ : λ‚λ¨Έμ§€ λ©”μ„λ“λ“¤κΉμ§€ κµ¬ν„ 
  - λ‹¨μν κ³¨κ²© κµ¬ν„μ„ ν™•μ¥ν•λ” κ²ƒλ§μΌλ΅ μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” λ° ν•„μ”ν• μΌμ΄ λ€λ¶€λ¶„ μ™„λ£λλ‹¤
- ##### ν…ν”λ¦Ώ λ©”μ„λ“ ν¨ν„΄
- μ»¬λ ‰μ… ν”„λ μ„μ›ν¬μ AbstractList, AbstractSet, AbstractMap ν΄λμ¤ => ν•µμ‹¬ μ»¬λ ‰μ… μΈν„°νμ΄μ¤μ κ³¨κ²© κµ¬ν„

[κ³¨κ²© κµ¬ν„μ„ μ‚¬μ©ν•΄ μ™„μ„±ν• κµ¬μ²΄ ν΄λμ¤]
```java
//μ™„λ²½ν λ™μ‘ν•λ” List κµ¬ν„μ²΄λ¥Ό λ°ν™ν•λ” μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“
static List<Integer> intArrayAsList(int[] a){
    Objects.requiredNull(a); 

    //λ‹¤μ΄μ•„λ¬λ“ μ—°μ‚°μλ” μλ°”9λ¶€ν„°
    // intλ°°μ—΄μ„ λ°›μ•„ Integer μΈμ¤ν„΄μ¤μ λ¦¬μ¤νΈ ν•νƒλ΅ λ³΄μ—¬μ¤ >> μ–΄νƒ­ν„°
    return new AbstractList<>(){
        @Override
        public Integer get(int i){
            return a[i];//μ¤ν† λ°•μ‹±
        }
        @Override
        public Integer set(int i, Integer val){
            int oldVal = a[i];
            a[i] = val ;//μ¤ν† μ–Έλ°•μ‹±
            return oldVal; //μ¤ν† λ°•μ‹±
        //λ°•μ‹±κ³Ό μ–Έλ°•μ‹± (int/Integer μΈμ¤ν„΄μ¤ μ‚¬μ΄μ λ³€ν™) : μ„±λ¥μ€ μΆ‹μ§€ μ•μ
        @Override
        public int size() {
            return a.length;
        }
    }
}

```
[μ¥μ ]
- κ³¨κ²© κµ¬ν„ ν΄λμ¤λ” μ¶”μƒν΄λμ¤μ²λΌ **κµ¬ν„μ„ λ„μ™€μ£Όλ”** λ™μ‹μ—, μ¶”μƒ ν΄λμ¤ μ •μ μ‹ λ”°λΌμ¤λ” **μ μ•½μ‚¬ν•­μ—μ„ μμ λ΅μ›€**
- κ³¨κ²© κµ¬ν„μ„ ν™•μ¥ν•λ©΄μ„ μΈν„°νμ΄μ¤ κµ¬ν„μ΄ κ±°μ λλ‚¨(κ³¨κ²© κµ¬ν„μ„ ν™•μ¥ν•μ§€ λ»ν•λ” κµ¬μ΅°λΌλ©΄ μΈν„°νμ΄μ¤λ¥Ό μ§μ ‘ κµ¬ν„)
  - μΈν„°νμ΄μ¤κ°€ μ§μ ‘ μ κ³µν•λ” λ””ν΄νΈ λ©”μ„λ“μ μ΄μ μ„ μ‚¬μ©κ°€λ¥
- λνΌ ν΄λμ¤μ™€ λΉ„μ·ν• λ°©μ‹μ„ μ‚¬μ© : κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό μ°νμ μΌλ΅ μ΄μ© κ°€λ¥
  - μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤μ—μ„ ν•΄λ‹Ή **κ³¨κ²© κµ¬ν„μ„ ν™•μ¥ν• privateλ‚΄λ¶€ ν΄λμ¤λ¥Ό μ •μ**
  - **κ° λ©”μ„λ“ νΈμ¶**μ„ λ‚΄λ¶€ ν΄λμ¤μ μΈμ¤ν„΄μ¤μ— *μ „λ‹¬*
  > λνΌ ν΄λμ¤μ™€ λΉ„μ·ν• μ΄ λ°©μ‹μ„ μ‹λ®¬λ μ΄νΈν• ***λ‹¤μ¤‘μƒμ†***

[2] μ¶”μƒ κ³¨κ²© κµ¬ν„ μ‘μ„±λ²•
- λ‹¤λ¥Έ λ©”μ„λ“λ“¤μ κµ¬ν„μ— μ‚¬μ©λλ” **κΈ°λ° λ©”μ„λ“λ“¤μ„ μ„ μ •** β†’ κ³¨κ²© κµ¬ν„μ—μ„λ” μ¶”μƒ λ©”μ„λ“κ°€ λ  κ²ƒ
- κΈ°λ° λ©”μ„λ“λ“¤μ„ μ‚¬μ©ν•΄ **μ§μ ‘ κµ¬ν„ν•  μ μλ” λ©”μ„λ“**λ¥Ό λ¨λ‘ **λ””ν΄νΈ λ©”μ„λ“**λ΅ μ κ³µ
- μΈν„°νμ΄μ¤μ λ©”μ„λ“ λ¨λ‘κ°€ κΈ°λ°λ©”μ„λ“+λ””ν΄νΈ λ©”μ„λ“ λΌλ©΄, κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό λ³„λ„λ΅ λ§λ“¤ μ΄μ λ” μ—†λ‹¤
  - μ„ λ‘κ°λ΅ λ§λ“¤μ§€ λ»ν• λ©”μ„λ“κ°€ λ‚¨μ•„μμ„ κ²½μ°, ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό ν•λ‚ λ§λ“¤μ–΄ λ‚¨μ€ λ©”μ„λ“λ“¤μ„ μ‘μ„±
  - κ³¨κ²© κµ¬ν„ ν΄λμ¤μ—λ” ν•„μ”ν•λ©΄ publicμ΄ μ•„λ‹ ν•„λ“μ™€ λ©”μ„λ“λ¥Ό μ¶”κ°€

[3] λ‹¨μ κµ¬ν„ (simple implementation)
- κ³¨κ²© κµ¬ν„μ μ‘μ€ λ³€μΆ…
- μƒμ†μ„ μ„ν•΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• κ²ƒμ΄ κ³¨κ²© κµ¬ν„κ³Ό κ³µν†µμ μ΄μ§€λ§, μ¶”μƒν΄λμ¤κ°€ μ•„λ‹λ‹¤.
- AbstractMap.SimpleEntryκ°€ μΆ‹μ€ μ



κµ¬μ΅°μƒ κ³¨κ²© ν›„ν„μ„ ν™•μ¥ν•μ§€ λ»ν•λ” μ²μ§€λΌ μΈν„°νμ΄μ¤λ¥Ό μ§μ ‘ κµ¬ν„

1.  equalsμ™€ hashCodeλ“±μ Objectμ λ©”μ„λ“λ¥Ό λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•λ‹¤ [ O | X ]
2. μƒμ†μ„ κΈμ§€ν•λ ¤λ©΄ ν΄λμ¤λ¥Ό [γ€€γ€€γ€€γ€€](μΌ)λ΅ μ„ μ–Έν•κ±°λ‚ μƒμ„±μ λ¨λ‘λ¥Ό μ™Έλ¶€μ—μ„ μ ‘κ·Όν•  μ μ—†λ„λ΅ λ§λ“ λ‹¤.
3. μΈν„°νμ΄μ¤μ λ©”μ„λ“ λ¨λ‘κ°€ κΈ°λ°λ©”μ„λ“+λ””ν΄νΈ λ©”μ„λ“ λΌλ©΄, κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό λ³„λ„λ΅ λ§λ“¤ μ΄μ λ” μ—†λ‹¤[ O | X ]