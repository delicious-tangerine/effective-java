# Item 21 : 인터페이스는 구현하는 쪽을 생각해 설계하라

> 💡 디폴트 메서드 선언시, 해당 인터페이스를 구현한 후 디폴트 메서드를 재정의 하지 않은 모든 곳에서 디폴트 구현이 쓰임
> 
> → 생각할 수 있는 모든 상황에서 불변식을 해치지 않는 디폴트 메서드를 작성하기란 어려운 법


#### 1. java8 Collection 인터페이스에 추가된 디폴트 메서드

**[Example]**
- java8에서 Collection 인터페이스에 removeIf가 추가됨
  - 모든 메서드에서 주어진 락 객체로 동기화한 후 내부 컬렉션 객체에 기능을 위임함
- removeIf 메서드를 재정의 하고, 디폴트 구현을 물려받게 된다면 모든 메서드 호출을 알아서 동기화해주지 못함
  - removeIf의 구현은 동기화에 관해 아무것도 모르므로 락객체 사용 x
  - synchronizedCollection 인스턴스를 여러 스레드가 공유하는 환경에서 한 스레드가 이 메서드 호출시 exception 발생


#### 2. 런타임 오류

- 디폴트 메서드는 기존 구현체에 런타일 오류를 일으킬 수 있다.
- 인터페이스를 설계할 떄는 여전히 세심한 주의를 기울이자
- 인터페이스를 릴리즈 한 뒤엔, 수정하지 말자