## Item 15 : 클래스와 멤버의 접근 권한을 최소화 하라

#### 1. 잘 설계된 컴포넌트 [캡슐화]

- 내부 구현 정보를 외부 컴포넌트로부터 숨겨, 구현과 API를 깔끔히 분리한다.
- 두 컴포넌트가 소통시 API만 사용하며, 서로의 내부 동작 방식에 개의치 않아야 한다.

#### 2. 캡슐화 (정보은닉) 의 장점

- 여러 컴포넌트를 병렬로 개발이 가능하여 개발 속도가 빨라진다.

- 시스템 관리비용을 낮춘다. 디버깅 및 다른 컴포넌트로 교체 등도 빠르게 할 수 있다.

-  잘 분리되어있는 컴포넌트는 다른 곳에 영향을 주지 않기 때문에, 최적화도 그 컴포넌트만 하면 되기 때문에 좋다 (정보은닉 자체는 성능을 높여주지 않는다.)

- 컴포넌트 독립성이 높고, 외부 컴포넌트에 의존도가 낮아 때문에 재사용성이 높다.

- 전체 시스템이 완성되지 않아도 개별 컴포넌트를 검증할 수 있기 때문에 큰 시스템을 개발하는 난이도를 낮춰준다.

 
#### 3. 캡슐화의 기본 원칙 : 접근제한자 (private, protected, public)
 
> 💡 기본원칙: 모든 클래스와 멤버의 접근성을 가능한 한 좁혀야 한다.

* private: 멤버를 선언한 톱레벨 클래스에서만 접근 가능.
* package-private: 멤버가 소속된 패키지 안의 모든 클래스에서 접근 가능.
* protected: package-private 접근범위 + 이 멤버를 선언한 하위클래스에서 접근가능
* public: 모든 곳에서 접근 가능

<br/> 

**✨ 캡슐화 절차**
[1] 공개 API 를 설계하고, **그 외 모든 멤버는 private** 으로 지정
<br/>
[2] 구현 중 **같은 패키지**의 **다른 클래스가 접근**해야하면 **package-private** 으로 풀어줌
<br/>
[3] 테스트코드 작성시, package-private 요소에 접근할 수 있으므로 테스트 대상과 같은 패키지에 있으면 안된다.
<br/>

> 💡 package-priavte이 많아질 시, 컴포넌트를 더 분리하는 것을 고려

<br/>

**✨ 멤버 접근성을 좁히지 못하게 하는 제약**

상위 클래스의 메서드를 재정의시, 하위 클래스 접근 수준을 상위 클래스에서보다 좁게 설정 할 수 없다
>> 리스코프 치환 원칙 : 상위 클래스는 하위 클래스의 인스턴스로 대체해 사용할 수 있어야함

때문에..
 
 

#### 3. Public 클래스의 제약
: public 클래스의 인스턴스 필드가 public 이 되어서는 안된다.

**🍊 이유**
1. 변경에 취약하여 불변식 보장 불가.
2. public 가변 필드를 갖는 클래스는 스레드 안전하지 않다.
 > 인스턴스 변수는 공유자원이다. 즉, 힙에 할당되어 있기 때문에 모든 스레드가 여기에 접근 할 수 있다.

3. public final 또한 해당 변수를 참조하는 모든 소스코드를 리팩터링해야한다.
4. 꼭 필요한 상수 > public static final로 공개해도 되지만, 꼭 기본타입/불변 객체를 참조 해야함



#### 모듈 시스템 (Java 9)
1. 모듈은 자신이 공개할 패키지를 선언
  > public, protected여도 공개대상이 아니면 외부에서 접근할 수 없음.

2. jar 패키징 시 module-info 를 포함하여 패키징한다.
>  프로젝트의 classpath 에 추가하여도 모듈이 공개했는지 여부와 상관 없이 public 클래스가 선언한 모든 public/protected멤버를 모듈 밖에서도 접근할 수 있게 된다.
> 이 것을 적극 활용한 것이 바로 **JDK** 자체 (자바 라이브러리에서 공개하지 ㅇ낳는 패키지들은 모듈 밖에서 절대 접근할 수 없다)
